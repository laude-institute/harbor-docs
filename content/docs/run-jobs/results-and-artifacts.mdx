---
title: Artifact Collection
description: Collecting files from the sandbox after a trial completes
---

Harbor can automatically collect files from the sandbox environment after each trial completes. This is useful for preserving model outputs, logs, generated files, or any other byproducts of the agent's work.

## Convention directory (zero configuration)

Any files written to `/logs/artifacts/` inside the sandbox are collected automatically with no configuration needed. For Docker environments, this directory is volume-mounted directly to the host. For remote environments (Daytona, Modal, E2B, etc.), files are downloaded after the trial finishes.

For example, if your task's test script or agent writes files to `/logs/artifacts/`:

```bash
# Inside the sandbox
echo "result" > /logs/artifacts/output.txt
cp model.pt /logs/artifacts/model.pt
```

These files will appear in the trial output directory at `<trial_dir>/artifacts/`.

## Config-driven artifact collection

To collect files from arbitrary paths in the sandbox (not just `/logs/artifacts/`), add an `artifacts` field to your job configuration.

### Simple form

List the paths you want to collect. Each file is saved with its basename under the trial's `artifacts/` directory.

```yaml title="job.yaml"
artifacts:
  - /app/hello.txt
  - /workspace/output.csv
  - /data/results
```

This saves `hello.txt`, `output.csv`, and the `results/` directory to `<trial_dir>/artifacts/`.

### Object form

Use the object form to control where files are saved within the `artifacts/` directory.

```yaml title="job.yaml"
artifacts:
  - source: /app/hello.txt
    destination: workspace/hello.txt
  - source: /app
    destination: full-workspace
```

This saves `/app/hello.txt` to `<trial_dir>/artifacts/workspace/hello.txt` and copies the entire `/app` directory to `<trial_dir>/artifacts/full-workspace/`.

### Full example

```yaml title="job.yaml"
jobs_dir: jobs
n_attempts: 1
orchestrator:
  type: local
  n_concurrent_trials: 1
environment:
  type: docker
  force_build: true
  delete: true
agents:
  - name: oracle
tasks:
  - path: examples/tasks/hello-world

artifacts:
  - /app/hello.txt
```

## How collection works

Artifact collection runs after the agent finishes and after verification completes. It is **best-effort** -- failures to collect an artifact will never cause the trial to fail.

The collection process:

1. **Convention directory** (`/logs/artifacts/`): For Docker, this is already on disk via volume mount. For remote environments, the directory is downloaded.
2. **Config-driven paths**: Each path is probed to determine whether it is a file or directory, then downloaded accordingly.
3. **Manifest**: A `manifest.json` file is written to the artifacts directory listing what was collected.

## Output structure

After collection, the trial directory contains:

```
<trial_dir>/
├── artifacts/
│   ├── manifest.json       # Collection manifest
│   ├── output.txt          # Files from /logs/artifacts/
│   └── hello.txt           # Config-driven artifact
├── agent/
├── verifier/
├── config.json
└── result.json
```

The manifest tracks each artifact's source, destination, type (file or directory), and whether collection succeeded:

```json title="manifest.json"
[
  {
    "source": "/logs/artifacts",
    "destination": "artifacts",
    "type": "directory",
    "status": "ok"
  },
  {
    "source": "/app/hello.txt",
    "destination": "artifacts/hello.txt",
    "type": "file",
    "status": "ok"
  }
]
```

## Viewing artifacts

Artifacts are viewable in the Harbor results viewer. Run `harbor view` and navigate to a trial to see collected artifacts under the Artifacts tab.

## Environment support

Artifact collection works across all environment types:

| Environment | Convention directory | Config-driven paths |
|-------------|---------------------|---------------------|
| Docker      | Volume-mounted (no download needed) | Downloaded after trial |
| Daytona     | Downloaded after trial | Downloaded after trial |
| Modal       | Downloaded after trial | Downloaded after trial |
| E2B         | Downloaded after trial | Downloaded after trial |
